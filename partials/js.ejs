<script src="vendor/jquery/dist/jquery.min.js"></script>
<script src="vendor/swiper/dist/js/swiper.jquery.js"></script>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="vendor/threee/three.min.js"></script>
<script src="vendor/threee/ColladaLoader.js"></script>
<script src="vendor/threee/ColladaLoader2.js"></script>
<script src='js/vue_component.js'></script>
<script src='js/threed.js'></script>
<script src="js/topbar.js"></script>
<script src="vendor/howler/howler.js"></script>
<script>
    var video;
    var sound, soundId;
    var curSlideElement;
    var mySwiper = new Swiper('.swiper-container', {
        direction : 'vertical',
        pagination: '.swiper-pagination',
        paginationType : 'progress',
        onSlideChangeEnd : function() {
            curSlideElement = app.$children[mySwiper.activeIndex];
            if (app && curSlideElement.properties.hasVideo) {
                video = document.getElementById(app.$children[mySwiper.activeIndex].properties.videoId);

                if(curSlideElement.properties.hasSound) {
                    sound = new Howl({
                        src : curSlideElement.properties.soundSrc
                    });
                    soundId = sound.play();
                    if (app.muted) sound.mute(true);
                    else sound.mute(false);
                }
                video.load();
                video.play();  
            }
            
        },
        onSlideChangeStart : function() {
            checktopbar();
            if (video && !video.paused) video.load();
            if (sound) {
                sound.unload();
            }
        }
    });
    var swiper_h = new Swiper('.swiper-container-h', {
        direction : 'horizontal'  ,
        pagination: '.swiper-pagination',
        paginationClickable : true,
        nextButton : '.swiper-button-next',
        prevButton : '.swiper-button-prev',
        preloadImages : false,
        lazyLoading : true

    });
</script>
<script src="js/iphone-inline-video.browser.js"></script>
<script>
    $('video').each(function(){
        makeVideoPlayableInline(this);
    });
</script>
<script>
    $("img")
        .on('load', function(){
        });
</script>
<script>
</script>
<script>
    var test = new Howl({
        src : ['sound/dingdong.mp3']  
    });
    $('.speaker-button').on('click', function(){
        app.muted = !app.muted;
        if (sound) {
            if (app.muted) sound.mute(true);
            else sound.mute(false);
        }
            
    });
    
</script>
